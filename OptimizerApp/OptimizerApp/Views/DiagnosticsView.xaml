<UserControl x:Class="OptimizerApp.Views.DiagnosticsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock Text="DiagnÃ³stico seguro" FontSize="20" FontWeight="SemiBold" Foreground="{StaticResource RazerTextPrimaryBrush}" />

        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,12,0,12" HorizontalAlignment="Left">
            <StackPanel.Resources>
                <Style TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
                    <Setter Property="Margin" Value="0,0,8,0" />
                </Style>
            </StackPanel.Resources>
            <Button Content="Actualizar" Command="{Binding RefreshCommand}" />
            <Button Content="Exportar JSON" Command="{Binding ExportJsonCommand}" />
            <Button Content="Exportar CSV" Command="{Binding ExportCsvCommand}" />
            <Button Content="Apps de inicio" Command="{Binding OpenStartupAppsCommand}" />
            <Button Content="Storage Sense" Command="{Binding OpenStorageSenseCommand}" />
        </StackPanel>

        <Grid Grid.Row="2" Margin="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="3*" />
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Style="{StaticResource RazerBorderStyle}" Margin="0,0,12,0">
                <StackPanel>
                    <TextBlock Text="Estado" FontWeight="SemiBold" Style="{StaticResource RazerSubtitleStyle}" />
                    <TextBlock Text="{Binding Snapshot.HealthStatus}" />
                    <TextBlock Text="Puntaje" FontWeight="SemiBold" Margin="0,8,0,0" />
                    <TextBlock Text="{Binding Snapshot.HealthScore}" />

                    <Separator Margin="0,8,0,8" />

                    <TextBlock Text="CPU (%)" FontWeight="SemiBold" />
                    <TextBlock Text="{Binding Snapshot.CpuUsagePercent}" />

                    <TextBlock Text="RAM usada (%)" FontWeight="SemiBold" Margin="0,8,0,0" />
                    <TextBlock Text="{Binding Snapshot.RamUsagePercent}" />

                    <TextBlock Text="RAM disponible (GB)" FontWeight="SemiBold" Margin="0,8,0,0" />
                    <TextBlock Text="{Binding Snapshot.RamAvailableGb}" />

                    <TextBlock Text="Disco libre (%)" FontWeight="SemiBold" Margin="0,8,0,0" />
                    <TextBlock Text="{Binding Snapshot.DiskFreePercent}" />

                    <TextBlock Text="Disco libre (GB)" FontWeight="SemiBold" Margin="0,8,0,0" />
                    <TextBlock Text="{Binding Snapshot.DiskFreeGb}" />
                </StackPanel>
            </Border>

            <Border Grid.Column="1" Style="{StaticResource RazerBorderStyle}">
                <StackPanel>
                    <TextBlock Text="Recomendaciones" FontWeight="SemiBold" Margin="0,0,0,8" Style="{StaticResource RazerSubtitleStyle}" />
                    <ItemsControl ItemsSource="{Binding Recommendations}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="{StaticResource AccentBrush}" BorderThickness="1" CornerRadius="4" Padding="8" Margin="0,0,0,8">
                                    <StackPanel>
                                        <TextBlock Text="{Binding Title}" FontWeight="SemiBold" />
                                        <TextBlock Text="{Binding Description}" TextWrapping="Wrap" />
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</UserControl>

